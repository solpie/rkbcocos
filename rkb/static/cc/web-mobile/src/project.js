window.__require=function t(e,o,n){function c(i,_){if(!o[i]){if(!e[i]){var a=i.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!_&&s)return s(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+i+"'")}}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return c(e[i][1][t]||t)},l,l.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)c(n[i]);return c}({"3v3":[function(t,e,o){"use strict";cc._RF.push(e,"a4e50/jPhVJ66kPSFKEmpEg","3v3");var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var _=t.length-1;_>=0;_--)(c=t[_])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../com/timer"),i=t("../../__c"),_=t("../../api"),a=t("../../web"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameTimer=new r.Timer,e.foulToFT=5,e}return n(e,t),e.prototype.onLoad=function(){this.id=(new Date).getTime().toString(),this.gameTimer.initTimer(this,"txt_timer")},e.prototype.start=function(){this.setScore({lScore:0,rScore:0}),this.setFoul_L(0),this.setFoul_R(0),this.gameTimer.resetTimer(),i.setText("txt_team_L",""),i.setText("txt_team_R",""),this.gameTimer.isMin=!0,this.initWS(),_c_.emit(i.ccType.Node,{name:"bg2_4v4",active:!1})},e.prototype.test=function(){a.loadImg64("player_info_avt","http://rtmp.icassi.us:8092/img/player/0323/p1.png")},e.prototype.setFoul_L=function(t,e){i.setText("txt_foul_L",t)},e.prototype.setFoul_R=function(t,e){i.setText("txt_foul_R",t)},e.prototype.setScore=function(t){i.setText("txt_score_L",t.lScore),i.setText("txt_score_R",t.rScore)},e.prototype.set4v4Icon=function(t){_c_.emit(i.ccType.Node,{name:"bg2_4v4",active:t.is4v4}),_c_.emit(i.ccType.Node,{name:"bg2_1v1",active:!t.is4v4})},e.prototype.initWS=function(){var t=this,e=a.getWsUrl();io(e).on("connect",function(t){cc.log("socketio.....localWS")}).on(_.WSEvent.sc_timerEvent,function(e){cc.log("sc_timerEvent",e),t.gameTimer.setTimerEvent(e)}).on(_.WSEvent.sc_setFoul,function(e){cc.log("sc_setFoul",e),t.setFoul_L(e.lFoul),t.setFoul_R(e.rFoul)}).on(_.WSEvent.sc_setTeam,function(t){cc.log("sc_setPlayer",t),i.setText("txt_team_L",t.lPlayer),i.setText("txt_team_R",t.rPlayer)}).on(_.WSEvent.sc_updateScore,function(e){cc.log("sc_updateScore",e),t.setScore(e)}).on(_.WSEvent.sc_updateFoul,function(e){cc.log("sc_updateFoul",e),t.setFoul_L(e.lFoul),t.setFoul_R(e.rFoul)}).on(_.WSEvent.sc_set_4v4_icon,function(e){cc.log("sc_set_4v4_icon",e),t.set4v4Icon(e)}).on(_.WSEvent.sc_sync_game,function(e){cc.log("sc_sync_game",e),e.id,t.id})},e=c([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../__c":"__c","../../api":"api","../../com/timer":"timer","../../web":"web"}],BBR_player_bar:[function(t,e,o){"use strict";cc._RF.push(e,"a5b674I4ZFG26kh4w7n9tCm","BBR_player_bar");var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var _=t.length-1;_>=0;_--)(c=t[_])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../__c"),i=cc._decorator,_=i.ccclass,a=i.property;o.EVENT_PLAYER_BAR_4V4="EVENT_PLAYER_BAR_4V4";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idx="",e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;this.setNodeLabel("txt_player_name",""),_c_.on(o.EVENT_PLAYER_BAR_4V4,function(e){var o=e[t.idx];o&&(t.setNodeLabel("txt_player_name",o.name),t.setSPbyUrl("avt",o.avatar),t.setNodeLabel("txt_player_blood",o.blood||0))})},c([a],e.prototype,"idx",void 0),e=c([_],e)}(r.InjectCls);o.default=s,cc._RF.pop()},{"../../__c":"__c"}],JsFunc:[function(t,e,o){"use strict";cc._RF.push(e,"53647ot8ylLHbVShzWNcLoS","JsFunc"),Object.defineProperty(o,"__esModule",{value:!0}),o.formatSecond=function(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=":"),void 0===n&&(n="");var c=Math.floor(t/60),r=t%60,i=c+"",_=r+"";return c<10&&(i="0"+i),r<10&&(_="0"+_),e?_:i+o+_+n},cc._RF.pop()},{}],__clip:[function(t,e,o){"use strict";cc._RF.push(e,"45636nxzW9CbZJzzJEKtkem","__clip"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.getComponent(cc.Animation).play("player_dot"),cc.log("on start")},e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],__c:[function(t,e,o){"use strict";cc._RF.push(e,"f631evoBMdDiK7w/lLKMsw9","__c");var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var _=t.length-1;_>=0;_--)(c=t[_])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./web"),i=cc._decorator,_=i.ccclass,a=i.property,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setNodeLabel=function(t,e){var o=this.node.getChildByName(t);o&&(o.getComponent(cc.Label).string=e)},e.prototype.setSPbyUrl=function(t,e){var o=this;r.loadImg64_InjectCls(e,function(e){var n=o.node.getChildByName(t);n&&l(n.getComponent(cc.Sprite),e)})},e}(cc.Component);function l(t,e){var o=new Image;o.src=e;var n=new cc.Texture2D;n.initWithElement(o),n.handleLoadedTexture();var c=new cc.SpriteFrame(n);t.spriteFrame=c}o.InjectCls=s,o.setText=function(t,e){_c_.emit(o.ccType.Label,{name:t,string:e})},o.ccType={Sprite:"Sprite",Label:"Label",Animation:"Animation",ProgressBar:"ProgressBar",Node:"Node"};var p={Sprite:cc.Sprite,Label:cc.Label,Animation:cc.Animation,ProgressBar:cc.ProgressBar,Node:cc.Node},u=["x","y","opacity","callback","active"];o.getNode=function(t,e){_c_.emit(o.ccType.Node,{name:t,callback:e})};var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cc_type="",e}return n(e,t),e.prototype.onLoad=function(){var t=this;if(this.cc_type)this.cls=this.cc_type;else for(var e in p){var n=p[e],c=this.node._components[0];if(c instanceof n){this.comp=c,this.cls=e;break}}this.cls==o.ccType.Node?this._name=this.node.name:this._name=this.node.getComponent(p[this.cls]).node.name;var r=function(e,o){t.cls==e&&_c_.on(e,function(e){e.name==t._name&&o(e)})};r(o.ccType.Node,function(e){for(var o=0,n=["x","y","opacity","callback","active"];o<n.length;o++){var c=n[o];null!=e[c]&&("callback"==c?e[c](t.node):t.node[c]=e[c])}}),r(o.ccType.Sprite,function(e){var o=t.comp;e.img64&&l(o,e.img64);cc.log("handle sprite",t._name,e.x);for(var n=0,c=["x","y","opacity","callback","active"];n<c.length;n++){var r=c[n];null!=e[r]&&("callback"==r?e[r](t.node):t.node[r]=e[r])}}),r(o.ccType.Label,function(e){var o=t.comp;for(var n in e)"name"!=n&&null!=o[n]&&(o[n]=e[n]);t.oneCompNode(e)}),r(o.ccType.Animation,function(e){var o=t.comp;e.play&&o.play(e.play)}),r(o.ccType.ProgressBar,function(e){var o=t.comp;if(null!=e.progress){o.progress=e.progress;for(var n=0;n<e.callbackMap.length;n++){var c=e.callbackMap[n],r=c[0];if(o.progress>=r){c[1](t.node);break}}}})},e.prototype.oneCompNode=function(t){for(var e=0,o=u;e<o.length;e++){var n=o[e];null!=t[n]&&("callback"==n?t[n](this.node):this.node[n]=t[n])}},c([a],e.prototype,"cc_type",void 0),e=c([_],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./web":"web"}],api:[function(t,e,o){"use strict";for(var n in cc._RF.push(e,"97b19fYMMNLcJlnoH9VSXld","api"),Object.defineProperty(o,"__esModule",{value:!0}),o.WSEvent={sc_ww3_team_score:"",sc_teamScore:"",sc_timerEvent:"",cs_timerEvent:"",sc_setFoul:"",cs_setFoul:"",sc_setBlood:"",sc_updateScore:"",sc_updateFoul:"",sc_set_4v4_icon:"",cs_setBlood:"",sc_setPlayer:"",sc_timeOut:"",sc_manual_blood:"",sc_setTeam:"",sc_setPlayerDot:"",sc_showWW3PlayerInfo:"",sc_start_ww3_game:"",cs_start_ww3_game:"",sc_sync_game:"",cs_sync_game:""},o.WSEvent)o.WSEvent[n]=n;cc._RF.pop()},{}],big_blood_rock:[function(t,e,o){"use strict";cc._RF.push(e,"d0d2e5oYURKzKGZdxvqXN37","big_blood_rock");var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var _=t.length-1;_>=0;_--)(c=t[_])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../api"),i=t("../../web"),_=t("../../__c"),a=t("./BBR_player_bar"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.log("BigBloodRock on loaded");axios.get("http://rtmp.icassi.us:8090/event?idx=0602").then(function(e){if(1==e.data.length){var o=e.data[0];for(var n in o.doc=JSON.parse(o.doc),t.eventDoc=o.doc,t.playerMap=o.doc.playerMap,t.playerMap){t.playerMap[n].avatar=o.doc.avatar_url+n+".png"}cc.log("playerMap",t.playerMap)}})},e.prototype.start=function(){_.getNode("4v4",function(t){cc.log("4v4 node",t)}),_.setText("txt_player_name_L",""),_.setText("txt_player_name_R",""),this.initWS()},e.prototype.initWS=function(){var t=this,e=i.getWsUrl();io(e).on("connect",function(t){cc.log("socketio.....localWS")}).on(r.WSEvent.sc_setPlayer,function(e){cc.log("sc_setPlayer",e);var o=t.playerMap[e.leftPlayer.playerId],n=t.playerMap[e.rightPlayer.playerId];_.setText("txt_player_name_L",o.name),_.setText("txt_player_name_R",n.name),i.loadImg64("avt_L",o.avatar),i.loadImg64("avt_R",n.avatar);for(var c=e.leftTeam,r={},s=0;s<c.length;s++){var l=c[s].playerId;r["L"+(s+1)]=t.playerMap[l]}_c_.emit(a.EVENT_PLAYER_BAR_4V4,r),t.leftTeamMap=r;var p=e.rightTeam,u={};for(s=0;s<p.length;s++){l=p[s].playerId;u["R"+(s+1)]=t.playerMap[l]}t.rightTeamMap=u,_c_.emit(a.EVENT_PLAYER_BAR_4V4,u)}).on(r.WSEvent.sc_timeOut,function(t){}).on(r.WSEvent.sc_manual_blood,function(e){cc.log("sc_manual_blood",e);for(var o=0,n=e.lTeam;o<n.length;o++){var c=n[o],r=t.findPlayerOnBar(c.playerId);r&&(r.blood=c.blood)}for(var i=0,_=e.rTeam;i<_.length;i++){c=_[i];var s=t.findPlayerOnBar(c.playerId);s&&(s.blood=c.blood)}_c_.emit(a.EVENT_PLAYER_BAR_4V4,t.leftTeamMap),_c_.emit(a.EVENT_PLAYER_BAR_4V4,t.rightTeamMap)})},e.prototype.findPlayerOnBar=function(t){for(var e in this.leftTeamMap){if(t==(o=this.leftTeamMap[e]).playerId)return o}for(var e in this.rightTeamMap){var o;if(t==(o=this.rightTeamMap[e]).playerId)return o}},e=c([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../__c":"__c","../../api":"api","../../web":"web","./BBR_player_bar":"BBR_player_bar"}],bloodBar:[function(t,e,o){"use strict";cc._RF.push(e,"e76bfaGNZZHOKmqElYwya+a","bloodBar"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./worldwar3"),c=t("../../__c"),r=t("../../com/gameConf"),i=function(){function t(t){this.maxBlood=r.confWW3.maxBlood,this._tmpBlood=-1,this._curBlood=-1,this._fx_offs=null,this._fx_cd=1500,this._fx_cd_timer=null,this.cur_fx_offs=-1,this._isR=t,this._bloodTxt=t?n._nm_.txt_blood_R:n._nm_.txt_blood_L,this._bloodCursor=t?"blood_bar_cursor_R":"blood_bar_cursor_L",this._bloodFx=t?"blood_bar_black_R":"blood_bar_black_L"}return t.prototype.setBlood=function(t){this.initBlood=t;var e=this._setBlood(t);this.bloodNoTween(e)},t.prototype.reset=function(){this.setBlood(r.confWW3.maxBlood)},t.prototype._calcOffs=function(t){var e=this._isR?-1:1,o=(this._bloodCursor,1-t/this.maxBlood);return c.setText(this._bloodTxt,t),(-495- -395*o)*e},t.prototype._setBlood=function(t){var e=this._isR?-1:1,o=this._bloodCursor,n=1-t/this.maxBlood;c.setText(this._bloodTxt,t);var r=(-495- -395*n)*e;return _c_.emit(c.ccType.Sprite,{name:o,callback:function(t){cc.tween(t).to(.1,{x:r}).start()}}),r},t.prototype.bloodTween=function(t){cc.log("play blood fx...",this._fx_offs),this.cur_fx_offs=this._fx_offs,cc.tween(t).to(.3,{x:this._fx_offs}).start()},t.prototype.bloodNoTween=function(t){_c_.emit(c.ccType.Sprite,{name:this._bloodFx,x:t})},t.prototype.setBloodByCurBlood=function(t){var e=this,o=this._curBlood-t;this._curBlood=t;var n,r=this._setBlood(t);if(null!=this._fx_offs&&(n=this._isR?r>this._fx_offs:r<this._fx_offs)&&cc.log("\u52a0\u8840"),this._fx_offs=r,n)this.bloodNoTween(r);else if(o>=0){this._tmpBlood<0&&(this._tmpBlood=t);if(this._fx_cd_timer)this._fx_cd=800;else{this._fx_cd=800;new cc.Scheduler;this._fx_cd_timer=setInterval(function(){e._fx_cd-=10,e._fx_cd<=0&&(_c_.emit(c.ccType.Sprite,{name:e._bloodFx,callback:function(t){e.bloodTween(t)}}),clearInterval(e._fx_cd_timer),e._fx_cd_timer=null)},10)}}return t},t.prototype.setBloodByDtScore=function(t){var e=this,o=this.initBlood-t;this._curBlood=o;var n,r=this._setBlood(o);if(null!=this._fx_offs&&(n=this._isR?r>this._fx_offs:r<this._fx_offs)&&cc.log("\u52a0\u8840"),this._fx_offs=r,n)this.bloodNoTween(r);else if(t>=0){this._tmpBlood<0&&(this._tmpBlood=o);if(this._fx_cd_timer)this._fx_cd=800;else{this._fx_cd=800;new cc.Scheduler;this._fx_cd_timer=setInterval(function(){e._fx_cd-=10,e._fx_cd<=0&&(_c_.emit(c.ccType.Sprite,{name:e._bloodFx,callback:function(t){e.bloodTween(t)}}),clearInterval(e._fx_cd_timer),e._fx_cd_timer=null)},10)}}return o},t}();o.BloodBar=i,cc._RF.pop()},{"../../__c":"__c","../../com/gameConf":"gameConf","./worldwar3":"worldwar3"}],gameConf:[function(t,e,o){"use strict";cc._RF.push(e,"3eeb9PEih9PIIq9IUu+ccOZ","gameConf"),Object.defineProperty(o,"__esModule",{value:!0}),o.confWW3={maxBlood:9,foulToHint:3,time:1200},cc._RF.pop()},{}],labelShadow:[function(t,e,o){"use strict";cc._RF.push(e,"645a98RIXlFqLN3zHaeY4WF","labelShadow"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,r=n.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){this.node.getComponent(cc.Label)},e.prototype.update=function(){this.label.string=this.text},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=i,cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"120adAfDgdOtZPy4v1kF4CF","main"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,r=(n.property,{ww3:"worldwar3",bblood:"big_blood_rock",rank0:"rank0","3v3":"3v3"});window._c_=new cc.Node("_c_");var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=new URLSearchParams(window.location.search).get("panel");if(t){for(var e in r)if(t==e){var o=r[e];cc.director.loadScene(o)}}else 0},e.prototype.start=function(){},e=__decorate([c],e)}(cc.Component);o.default=i,cc._RF.pop()},{}],rank0:[function(t,e,o){"use strict";cc._RF.push(e,"0ef6c2EQntE2ZWiHKG3AS7f","rank0"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../com/timer"),c=t("../../web"),r=t("../../api"),i=t("../../__c"),_=cc._decorator,a=_.ccclass,s=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameTimer=new n.Timer,e.foulToFT=3,e}return __extends(e,t),e.prototype.onload=function(){this.gameTimer.initTimer(this,"txt_timer")},e.prototype.start=function(){this.gameTimer.isMin=!1,this.gameTimer.resetTimer(),this.initWS()},e.prototype.initWS=function(){var t=this,e=c.getWsUrl();io(e).on("connect",function(t){cc.log("socketio.....localWS")}).on(r.WSEvent.sc_setFoul,function(e){cc.log("sc_setFoul",e),t.setFoul_L(e.lFoul),t.setFoul_R(e.rFoul)}).on(r.WSEvent.sc_setPlayer,function(e){cc.log("sc_setPlayer",e),t.setPlayer(0,e.leftPlayer),t.setPlayer(1,e.rightPlayer),e.isRestFoul&&(t.setFoul_L(0),t.setFoul_R(0))})},e.prototype.setPlayer=function(t,e){cc.log("setPlayer",e);var o=t?"txt_player_right":"txt_player_left";if(i.setText(o,e.name),e.avatar){var n=t?"avt_R":"avt_L";c.loadImg64(n,e.avatar)}var r=t?"txt_hw_R":"txt_hw_L",_=e.hwa[0]+"cm/"+e.hwa[1]+"kg";i.setText(r,_);var a=t?"txt_info_R":"txt_info_L",s=e.info;i.setText(a,s)},e.prototype.setFoul_L=function(t,e){e&&(this.foulToFT=e),i.setText("txt_foul_L",t);var o=t/this.foulToFT;this.setFoulBar(!1,o)},e.prototype.setFoulBar=function(t,e){var o=t?"foulBar_R":"foulBar_L";cc.log("setFoulBar",o,e),_c_.emit(i.ccType.ProgressBar,{name:o,progress:e,callbackMap:[[1,function(t){cc.log("on progress",t),t.getComponent(cc.Animation).play("foul_bar_max")}],[0,function(t){cc.log("on progress",t);var e=t.getComponent(cc.Animation);e.stop("foul_bar_max"),e.play("foul_bar_normal")}]]})},e.prototype.setFoul_R=function(t,e){e&&(this.foulToFT=e),i.setText("txt_foul_R",t);var o=t/this.foulToFT;this.setFoulBar(!0,o)},e=__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../../__c":"__c","../../api":"api","../../com/timer":"timer","../../web":"web"}],stats:[function(t,e,o){"use strict";cc._RF.push(e,"5c2997PfENMl4jjFmsCipdh","stats"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,r=n.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=i,cc._RF.pop()},{}],timer:[function(t,e,o){"use strict";cc._RF.push(e,"b9fb7MYUuxMiaVk49oMgwiX","timer"),Object.defineProperty(o,"__esModule",{value:!0});var n,c=t("../__c"),r=t("./JsFunc");o.TimerEvent={START:"start",PAUSE:"pause",TOGGLE:"toggle",SHIFT:"shift",RESET:"reset",SETTING:"setting"},o.TimerState={START_STR:"start",PAUSE_STR:"pause",PAUSE:0,RUNNING:1};var i=function(){function t(){this.timeInSec=1200,this.resetTime=0,this.isSecOnly=!1,this.isMin=!1}return t.prototype.initTimer=function(t,e){this._component=t,this._textName=e,this.resetTimer()},t.prototype.onTick=function(){this.isMin?this.timeInSec--:this.timeInSec++,c.setText(this._textName,r.formatSecond(this.timeInSec))},t.prototype.startTimer=function(){var t=this;n||(n=function(){t.onTick()},this._component.schedule(n,1,1/0))},t.prototype.pauseTimer=function(){n&&(this._component.unschedule(n),n=null)},t.prototype.setTimeBySec=function(t){this.timeInSec=t,c.setText(this._textName,r.formatSecond(this.timeInSec,this.isSecOnly))},t.prototype.resetTimer=function(){this.timerState=o.TimerState.PAUSE,this.setTimeBySec(this.resetTime)},t.prototype.setTimerEvent=function(t){t.event==o.TimerEvent.PAUSE?this.pauseTimer():t.event==o.TimerEvent.START?this.startTimer():t.event==o.TimerEvent.RESET?(this.resetTimer(),this.pauseTimer()):t.event==o.TimerEvent.SETTING?this.setTimeBySec(t.param):t.event==o.TimerEvent.SHIFT?this.setTimeBySec(this.timeInSec+t.param):t.event==o.TimerEvent.TOGGLE&&this.toggleTimer()},t.prototype.toggleTimer=function(t){n?this.pauseTimer():this.startTimer()},t}();o.Timer=i,cc._RF.pop()},{"../__c":"__c","./JsFunc":"JsFunc"}],web:[function(t,e,o){"use strict";cc._RF.push(e,"fe7e54cytVMp4QLjboCqLbl","web"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./__c");function c(t){return"/proxy?url="+t}o.getWsUrl=function(){return"/rkb"},o.loadImg64=function(t,e){var o=c(e);axios.get(o).then(function(e){_c_.emit(n.ccType.Sprite,{name:t,img64:e.data})})};var r={};o.loadImg64_InjectCls=function(t,e){var o=c(t);r[t]?e(r[t]):axios.get(o).then(function(o){r[t]=o.data,e(o.data)})};var i="http://rtmp.icassi.us:8090/";o.getPanelConf=function(t,e){var o=i+"panel/?pid="+t;axios.get(o).then(e)},o.opReq=function(t,e){var o="/panel/online/"+t;e._="_",axios({url:o,method:"post",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}})},cc._RF.pop()},{"./__c":"__c"}],worldwar3_test:[function(t,e,o){"use strict";cc._RF.push(e,"e080bKA8xJMao2Hn7ZsbbKj","worldwar3_test"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./ww3_fx"),c=t("../../__c"),r=cc._decorator.ccclass,i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.on_test_info_L=function(t){cc.log(t),n.showPlayerInfo(!0),c.setText("txt_info_L",t)},e.prototype.on_test_info_R=function(t){cc.log(t),n.showPlayerInfo(!0),c.setText("txt_info_R",t)},e=__decorate([r],e)}(cc.Component);o.default=i,cc._RF.pop()},{"../../__c":"__c","./ww3_fx":"ww3_fx"}],worldwar3:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","worldwar3"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../api"),c=t("../../com/timer"),r=t("../../web"),i=t("../../__c"),_=t("./bloodBar"),a=t("./ww3_fx"),s=cc._decorator.ccclass;o._nm_={txt_team_score:"txt_team_score",txt_team_left:"txt_team_left",txt_team_right:"txt_team_right",txt_player_left:"txt_player_left",txt_player_right:"txt_player_right",txt_blood_L:"txt_blood_L",txt_blood_R:"txt_blood_R",txt_foul_L:"txt_foul_L",txt_foul_R:"txt_foul_R",sp_avt_L:"avt_L",sp_avt_R:"avt_R"};var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameTimer=new c.Timer,e.playerDocTotal=5,e.foulToFT=3,e}return __extends(e,t),e.prototype.onLoad=function(){this.id=(new Date).getTime().toString(),cc.log("onLoad Worldwar3,id:",this.id),this.gameTimer.initTimer(this,"txt_timer");var t=cc.find("op_layer"),e=cc.find("pageview"),o=cc.find("pageview/view/page_content");cc.log("op_layer",t,e),cc.log(o)},e.prototype.start=function(){window.ww3=this,console.log("start worldwar3"),this.gameTimer.isMin=!1,this.gameTimer.resetTimer(),this.bloodBar_L=new _.BloodBar(0),this.bloodBar_R=new _.BloodBar(1),this.bloodBar_L.reset(),this.bloodBar_R.reset(),this.setFoul_L(0),this.setFoul_R(0),i.setText("txt_info_L",""),i.setText("txt_info_R",""),i.setText(o._nm_.txt_player_left,""),i.setText(o._nm_.txt_player_right,""),_c_.emit(i.ccType.Node,{name:"info_bg",active:!1}),i.setText(o._nm_.txt_team_score,"0 - 0"),this.initState(),this.initWS(),_c_.emit(i.ccType.Node,{name:"test_layer",active:!1}),i.getNode("vBox_L",function(t){cc.log("vBox_L",t)})},e.prototype.test=function(){var t=this;setTimeout(function(){r.loadImg64(o._nm_.sp_avt_L,"http://rtmp.icassi.us:8092/img/player/0323/p1.png"),i.setText(o._nm_.txt_team_score,"0 - 0"),i.setText(o._nm_.txt_blood_L,"2"),i.setText(o._nm_.txt_player_left,"\u674e\u80dc\u4fca"),i.setText(o._nm_.txt_player_right,"\u9a6c\u514b"),t.setPlayerDot(1,3,!1),t.setPlayerDot(0,3,!0)},2e3)},e.prototype.setPlayerDot=function(t,e,o){var n="player_dot_off_"+(t?"R":"L"),c=this.playerDocTotal,r=o?"player_dot_on":"player_dot_off";function _(t,e){var o=n+e;setTimeout(function(){_c_.emit(i.ccType.Animation,{name:o,play:r})},t)}for(var a=0;a<c-e;a++){_(250*a,o?c-a:a+1)}},e.prototype.testPlayerDot=function(){var t=this;function e(t,e){setTimeout(function(){i.setText(o._nm_.txt_blood_L,e),i.setText(o._nm_.txt_blood_R,e)},t)}cc.log("testPlayerDot.."),this.setPlayerDot(1,2,!1);for(var n=0;n<11;n++)e(80*n,n);this.bloodBar_L.setBlood(9),this.bloodBar_R.setBlood(8);var c=function(e,o){setTimeout(function(){t.setFoul_L(o),t.setFoul_R(o),t.bloodBar_L.setBloodByDtScore(5),t.bloodBar_R.setBloodByDtScore(1)},e)};for(n=0;n<6;n++)c(280*n,n)},e.prototype.setFoul_L=function(t,e){e&&(this.foulToFT=e),i.setText(o._nm_.txt_foul_L,t);var n=t/this.foulToFT;this.setFoulBar(!1,n)},e.prototype.setFoul_R=function(t,e){e&&(this.foulToFT=e),i.setText(o._nm_.txt_foul_R,t);var n=t/this.foulToFT;this.setFoulBar(!0,n)},e.prototype.setFoulBar=function(t,e){var o=t?"foulBar_R":"foulBar_L";cc.log("setFoulBar",o,e),_c_.emit(i.ccType.ProgressBar,{name:o,progress:e,callbackMap:[[1,function(t){cc.log("on progress",t),t.getComponent(cc.Animation).play("foul_bar_max")}],[0,function(t){cc.log("on progress",t);var e=t.getComponent(cc.Animation);e.stop("foul_bar_max"),e.play("foul_bar_normal")}]]})},e.prototype.setBaseGame=function(t){this.setFoul_L(t.lFoul),this.setFoul_R(t.rFoul),this.bloodBar_L.setBloodByCurBlood(t.lBlood),this.bloodBar_R.setBloodByCurBlood(t.rBlood),this.gameTimer.setTimeBySec(t.curTimeInSec)},e.prototype.setPlayer=function(t,e){cc.log("setPlayer",e);var n=t?o._nm_.txt_player_right:o._nm_.txt_player_left;if(i.setText(n,e.name),e.avatar){var c=t?o._nm_.sp_avt_R:o._nm_.sp_avt_L;r.loadImg64(c,e.avatar)}null!=e.blood&&(t?this.bloodBar_R:this.bloodBar_L).setBlood(e.blood);var _=t?"txt_hw_R":"txt_hw_L",a=e.hwa[0]+"cm/"+e.hwa[1]+"kg";i.setText(_,a);var s=t?"txt_info_R":"txt_info_L",l=e.info;i.setText(s,l)},e.prototype.initState=function(){var t=this;r.getPanelConf("ww3",function(e){cc.log("get panel conf",e);var n=e.data[0];i.setText(o._nm_.txt_team_left,n.team_L),i.setText(o._nm_.txt_team_right,n.team_R);var c=Number(n.foul_hint);c>0&&(t.foulToFT=c)})},e.prototype.initWS=function(){var t=this,e=r.getWsUrl();io(e).on("connect",function(t){cc.log("socketio.....localWS")}).on(n.WSEvent.sc_teamScore,function(t){cc.log("sc_teamScore",t),i.setText(o._nm_.txt_team_score,t.lScore+" - "+t.rScore)}).on(n.WSEvent.sc_timerEvent,function(e){cc.log("sc_timerEvent",e),t.gameTimer.setTimerEvent(e)}).on(n.WSEvent.sc_setFoul,function(e){cc.log("sc_setFoul",e),t.setFoul_L(e.lFoul),t.setFoul_R(e.rFoul)}).on(n.WSEvent.sc_setBlood,function(e){if(cc.log("sc_setBlood",e),e.isSetBlood){var o=e.isR?t.bloodBar_R:t.bloodBar_L,n=e.isR?e.rBlood:e.lBlood;o.setBloodByCurBlood(n)}else{(o=!e.isLeft?t.bloodBar_L:t.bloodBar_R).setBloodByDtScore(e.score)}}).on(n.WSEvent.sc_setPlayer,function(e){cc.log("sc_setPlayer",e),t.setPlayer(0,e.leftPlayer),t.setPlayer(1,e.rightPlayer),e.isRestFoul&&(t.setFoul_L(0),t.setFoul_R(0))}).on(n.WSEvent.sc_setPlayerDot,function(e){cc.log("sc_setPlayerDot",e);var o=e.playerDot_L,n=e.playerDot_R;e.isOn&&(o=t.playerDocTotal-o,n=t.playerDocTotal-n),t.setPlayerDot(0,o,e.isOn),t.setPlayerDot(1,n,e.isOn)}).on(n.WSEvent.sc_showWW3PlayerInfo,function(t){a.showPlayerInfo(t.visible,t.playerArr)}).on(n.WSEvent.sc_start_ww3_game,function(e){t.setFoul_L(0),t.setFoul_R(0),t.gameTimer.setTimerEvent({event:c.TimerEvent.RESET})}).on(n.WSEvent.sc_sync_game,function(e){cc.log("sc_sync_game",e),e.id!=t.id&&t.setBaseGame(e)})},e=__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../__c":"__c","../../api":"api","../../com/timer":"timer","../../web":"web","./bloodBar":"bloodBar","./ww3_fx":"ww3_fx"}],ww3_fx:[function(t,e,o){"use strict";cc._RF.push(e,"5a33ay9v/hOBKcYbmYzsKjU","ww3_fx"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../__c");function c(t,e,o){_c_.emit(e,{name:t,callback:function(t){o(cc.tween(t))}})}o.resetPlayerInfo=function(){},o.showPlayerInfo=function(t,e){t?(_c_.emit(n.ccType.Node,{name:"info_bg",active:!0}),_c_.emit(n.ccType.Node,{name:"front_panel",opacity:0}),_c_.emit(n.ccType.Node,{name:"team_bg",opacity:0}),_c_.emit(n.ccType.Label,{name:"txt_info_R",opacity:0}),_c_.emit(n.ccType.Label,{name:"txt_info_R",callback:function(t){cc.tween(t).to(.3,{opacity:255}).start()}}),c("txt_info_L",n.ccType.Label,function(t){t.to(0,{opacity:0}).to(.3,{opacity:255}).start()}),_c_.emit(n.ccType.Label,{name:"txt_hw_L",callback:function(t){cc.tween(t).to(0,{x:60}).to(.2,{x:198}).start()}}),_c_.emit(n.ccType.Label,{name:"txt_hw_R",callback:function(t){cc.tween(t).to(0,{x:-60}).to(.2,{x:-198}).start()}}),c("info_player_L",n.ccType.Node,function(t){t.to(0,{y:0}).to(.1,{y:55}).start()}),c("info_player_R",n.ccType.Node,function(t){t.to(0,{y:0}).to(.1,{y:55}).start()})):(_c_.emit(n.ccType.Node,{name:"info_bg",active:!1}),_c_.emit(n.ccType.Node,{name:"team_bg",opacity:255}),c("front_panel",n.ccType.Node,function(t){t.to(.2,{opacity:255}).start()}))},cc._RF.pop()},{"../../__c":"__c"}],ww3_op:[function(t,e,o){"use strict";cc._RF.push(e,"a71f9wt1QRH+7kT2xvMd5pd","ww3_op"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../api"),c=t("../../com/timer"),r=t("../../web"),i=cc._decorator,_=i.ccclass,a=(i.property,function(){function t(){this.lBlood=0,this.rBlood=0,this.lFoul=0,this.rFoul=0,this.lName="",this.rName="",this.lPlayerId="",this.rPlayerId="",this.curTimeInSec=-1}return t.prototype.set_dt_lBlood=function(t){this.lBlood+=t,this.lBlood<0&&(this.lBlood=0)},t.prototype.set_dt_rBlood=function(t){this.rBlood+=t,this.rBlood<0&&(this.rBlood=0)},t.prototype.set_dt_rFoul=function(t){this.rFoul+=t,this.rFoul<0&&(this.rFoul=0)},t.prototype.set_dt_lFoul=function(t){this.lFoul+=t,this.lFoul<0&&(this.lFoul=0)},t}());o.BaseGame=a;var s=new a,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.op_start_game=function(){this._emit_start_ww3_game()},e.prototype.op_sync_game=function(){this._emit_sync_game()},e.prototype.op_foul_min_R=function(){this._emit_foul(!0,-1)},e.prototype.op_foul_min_L=function(){this._emit_foul(!1,-1)},e.prototype.op_foul_add_R=function(){this._emit_foul(!0,1)},e.prototype.op_foul_add_L=function(){this._emit_foul(!1,1)},e.prototype.op_blood_min_R=function(){this._emit_blood(!0,-1)},e.prototype.op_blood_min_L=function(){this._emit_blood(!1,-1)},e.prototype.op_blood_add_R=function(){this._emit_blood(!0,1)},e.prototype.op_blood_add_L=function(){this._emit_blood(!1,1)},e.prototype.op_set_timer=function(){if(/^([0-9]+[\-]?)|([0-9]+[\-]+[0-9])$/.test(this._set_time_val)){var t,e=this._set_time_val.split("-");2==e.length?t=60*Number(e[0])+Number(e[1]):Number(this._set_time_val)>-1&&(t=Number(this._set_time_val)),r.opReq(n.WSEvent.cs_timerEvent,{event:c.TimerEvent.SETTING,param:t})}},e.prototype.op_on_set_timer_changed=function(t){cc.log("op_on_set_timer_changed",t),this._set_time_val=t},e.prototype.op_start_timer=function(){r.opReq(n.WSEvent.cs_timerEvent,{event:c.TimerEvent.START})},e.prototype.op_pause_timer=function(){r.opReq(n.WSEvent.cs_timerEvent,{event:c.TimerEvent.PAUSE})},e.prototype._emit_foul=function(t,e){t?s.set_dt_rFoul(e):s.set_dt_lFoul(e),r.opReq(n.WSEvent.cs_setFoul,{lFoul:s.lFoul,rFoul:s.rFoul})},e.prototype._emit_sync_game=function(){var t=window.ww3;s.curTimeInSec=t.gameTimer.timeInSec,s.id=t.id,r.opReq(n.WSEvent.cs_sync_game,s)},e.prototype._emit_start_ww3_game=function(){r.opReq(n.WSEvent.cs_start_ww3_game,s)},e.prototype._emit_blood=function(t,e){t?s.set_dt_rBlood(e):s.set_dt_lBlood(e),r.opReq(n.WSEvent.cs_setBlood,{isSetBlood:!0,isR:t,lBlood:s.lBlood,rBlood:s.rBlood})},e=__decorate([_],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../api":"api","../../com/timer":"timer","../../web":"web"}]},{},["__c","__clip","api","JsFunc","gameConf","timer","labelShadow","3v3","BBR_player_bar","big_blood_rock","main","rank0","bloodBar","stats","worldwar3","worldwar3_test","ww3_fx","ww3_op","web"]);